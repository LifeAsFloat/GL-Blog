<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GL-Blog - 极简博客</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #0a0a0a;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      /* 防止渲染闪烁 */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      /* 优化渲染性能 */
      transform: translateZ(0);
    }

    /* 背景图片 */
    .bg-image {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      opacity: 0.85;
    }

    .bg-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.6) 100%);
      z-index: 1;
    }

    /* 导航栏 - 完全照搬files.html */
    .card-nav-container {
      position: fixed;
      top: 2em;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 500px;
      z-index: 99;
    }

    .card-nav {
      display: block;
      height: 60px;
      padding: 0;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(40px) saturate(200%);
      -webkit-backdrop-filter: blur(40px) saturate(200%);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 0.75rem;
      position: relative;
      overflow: hidden;
      transition: height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card-nav.open {
      height: 120px;
    }

    .card-nav-top {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 0.45rem 0.55rem 1.1rem;
      z-index: 2;
    }

    .hamburger-menu {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      gap: 6px;
      color: #000;
    }

    .hamburger-line {
      width: 30px;
      height: 2px;
      background-color: currentColor;
      transition: transform 0.25s ease;
    }

    .hamburger-menu.open .hamburger-line:first-child {
      transform: translateY(4px) rotate(45deg);
    }

    .hamburger-menu.open .hamburger-line:last-child {
      transform: translateY(-4px) rotate(-45deg);
    }

    .logo-container {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 20px;
      font-weight: 600;
      color: #000;
    }

    .card-nav-cta-button {
      background-color: #111;
      color: white;
      border: none;
      border-radius: calc(0.75rem - 0.35rem);
      padding: 0 1rem;
      height: 100%;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.3s ease;
      text-decoration: none;
      display: flex;
      align-items: center;
      position: relative;
    }

    .card-nav-cta-button:hover {
      background-color: #333;
    }

    /* 用户菜单 */
    .user-menu {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 12px;
      /* 移除阴影以避免遮挡问题 */
      min-width: 160px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      overflow: hidden;
    }

    .user-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .user-menu-item {
      display: block;
      padding: 12px 20px;
      color: #333;
      text-decoration: none;
      font-size: 0.9rem;
      transition: background-color 0.2s;
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
    }

    .user-menu-item:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .user-menu-divider {
      height: 1px;
      background: rgba(0, 0, 0, 0.08);
      margin: 4px 0;
    }

    .card-nav-content {
      position: absolute;
      left: 0;
      right: 0;
      top: 60px;
      bottom: 0;
      padding: 0.5rem;
      display: flex;
      align-items: flex-end;
      gap: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .card-nav.open .card-nav-content {
      opacity: 1;
      pointer-events: auto;
    }

     .nav-card {
       height: 100%;
       flex: 1 1 0;
       min-width: 0;
       border-radius: calc(0.75rem - 0.2rem);
       position: relative;
       display: flex;
       flex-direction: column;
       align-items: center;
       justify-content: center;
       padding: 12px 16px;
       user-select: none;
       transition: opacity 0.3s ease, transform 0.2s ease;
     }

     .nav-card:hover {
       opacity: 0.85;
       transform: translateY(-2px);
     }

     .nav-card-label {
       font-weight: 500;
       font-size: 18px;
       width: 100%;
       text-align: center;
       display: flex;
       align-items: center;
       justify-content: center;
       height: 100%;
     }

    /* 主内容区域 */
    .main-container {
      position: relative;
      z-index: 2;
      max-width: 1600px;
      margin: 0 auto;
      padding: 140px 20px 40px;
      display: grid;
      grid-template-columns: 320px 1fr 320px;
      gap: 30px;
      transition: padding-top 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      align-items: start;
    }

    /* 左侧个人信息 */
    .sidebar-left {
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 50; /* 大幅提高层级，确保在所有元素之上 */
    }

    .profile-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 1rem;
      padding: 30px 20px;
      /* 移除阴影以避免与导航栏重叠 */
      text-align: center;
    }

    .profile-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      margin: 0 auto 15px;
      border: 4px solid rgba(0, 0, 0, 0.05);
      overflow: hidden;
      position: relative;
      background-color: #f0f0f0;
    }

    .profile-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    .profile-nickname {
      font-size: 1.5rem;
      font-weight: 600;
      color: #000;
      margin-bottom: 10px;
    }

    .profile-bio {
      font-size: 0.95rem;
      color: #666;
      min-height: 1.5em;
      line-height: 1.6;
      user-select: none;
      -webkit-user-select: none;
      cursor: default;
    }

    /* 打字机效果 */
    .typing-text {
      display: inline;
    }

    .typing-cursor {
      display: inline-block;
      width: 2px;
      height: 1em;
      background-color: #333;
      margin-left: 2px;
      animation: blink 1s step-end infinite;
      vertical-align: baseline;
      position: relative;
      top: 0.1em;
    }

    @keyframes blink {
      0%, 50% {
        opacity: 1;
      }
      50.01%, 100% {
        opacity: 0;
      }
    }

    .social-links {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 20px;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 45px;
      background: rgba(0, 0, 0, 0.04);
      border-radius: 0.5rem;
      color: #333;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      background: rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }

    .social-link svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .notice-card, .category-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 1rem;
      padding: 20px;
      /* 移除阴影以避免与导航栏重叠 */
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      color: #000;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
      letter-spacing: 0.5px;
    }

    .notice-content {
      font-size: 0.9rem;
      color: #666;
      line-height: 1.6;
    }

    .category-list, .tag-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .category-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.03);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      color: #333;
    }

    .category-item:hover {
      background: rgba(0, 0, 0, 0.08);
      transform: translateX(5px);
    }

    .category-count {
      background: rgba(0, 0, 0, 0.1);
      padding: 4px 8px;
      border-radius: 50%;
      font-size: 0.8rem;
      font-weight: 600;
      min-width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .tag-list {
      flex-direction: row;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag-item {
      padding: 6px 14px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 20px;
      font-size: 0.85rem;
      color: #666;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .tag-item:hover {
      background: rgba(0, 0, 0, 0.1);
      color: #000;
    }

    /* 中间文章列表 - 固定2列网格 */
    .post-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 30px;
      align-content: start;
      position: relative;
      z-index: 1; /* 降低到底层 */
    }

    /* 文章卡片 - 16:14 比例（16:9封面 + 内容区） */
    .post-item {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 1.5rem;
      overflow: hidden;
      /* 移除阴影以避免重叠问题 */
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 2; /* 降低文章卡片基础层级 */
      /* 使用aspect-ratio确保整体比例为16:14 */
      aspect-ratio: 16 / 14;
      width: 100%;
    }

    .post-item:hover {
      /* 优雅的3D提升效果 */
      transform: translateY(-12px) scale(1.02);
      /* 增强毛玻璃效果 */
      backdrop-filter: blur(35px) saturate(180%);
      -webkit-backdrop-filter: blur(35px) saturate(180%);
      /* 更明显的背景变化 */
      background: rgba(255, 255, 255, 0.95);
      /* 层级控制 */
      z-index: 3;
    }

    /* 封面图 - 16:9 比例 */
    .post-cover {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      display: block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* 内容区域 - 紧凑布局用于显示标题、分类、标签 */
    .post-content {
      flex: 1;
      padding: 18px 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      justify-content: space-between;
      min-height: 0;
    }

    /* 文章标题 - 确保可见 */
    .post-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1a1a1a;
      line-height: 1.4;
      margin: 0;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-clamp: 2;
      overflow: hidden;
      word-break: break-word;
      flex: 1;
    }

    /* 分类和标签容器 - 紧凑间距 */
    .post-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: auto;
    }

    /* 分类标签 - 紧凑尺寸 */
    .post-category {
      display: inline-flex;
      align-items: center;
      padding: 6px 14px;
      background: #000;
      color: white;
      border-radius: 14px;
      font-size: 0.9rem;
      font-weight: 600;
      white-space: nowrap;
      transition: all 0.3s ease;
    }

    /* 标签列表 */
    .post-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      flex: 1;
    }

    /* 单个标签 - 紧凑尺寸 */
    .post-tag {
      display: inline-flex;
      align-items: center;
      padding: 5px 12px;
      background: rgba(0, 0, 0, 0.08);
      color: #666;
      border: 1px solid rgba(0, 0, 0, 0.12);
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 500;
      white-space: nowrap;
      transition: all 0.3s ease;
    }

    .post-category:hover {
      background: #333;
      transform: translateY(-1px);
    }

    .post-tag:hover {
      background: rgba(0, 0, 0, 0.12);
      color: #000;
      border-color: rgba(0, 0, 0, 0.2);
      transform: translateY(-1px);
    }

    /* 隐藏摘要 */
    .post-excerpt {
      display: none;
    }

    /* 页面底部版权信息 */
    .footer {
      position: relative;
      z-index: 2;
      padding: 40px 20px;
      text-align: center;
      background: transparent;
      margin-top: 60px;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer p {
      margin: 8px 0;
      color: #666;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .footer a {
      color: #667eea;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer a:hover {
      color: #764ba2;
    }

    /* 分类和标签可点击样式 */
    .category-item,
    .tag-item {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .category-item:hover {
      background: rgba(0, 0, 0, 0.08);
      transform: translateX(5px);
      color: #000;
    }

    .tag-item:hover {
      background: rgba(0, 0, 0, 0.1);
      transform: translateX(5px);
      color: #000;
    }

    .category-item.active {
      background: #000;
      color: white !important;
      font-weight: 600;
      transform: translateX(8px);
    }

    .tag-item.active {
      background: #000;
      color: white !important;
      font-weight: 600;
      transform: scale(1.05);
    }

    /* 响应式设计 */
    @media (max-width: 1400px) {
      .main-container {
        grid-template-columns: 1fr;
        max-width: 800px;
      }

      .sidebar-left,
      .sidebar-right {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      .post-content {
        padding: 24px;
      }
      
      .post-title {
        font-size: 1.5rem;
      }
    }

    /* 右侧统计 */
    .sidebar-right {
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 60; /* 进一步提高层级，确保在所有元素之上 */
    }

    .stats-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: 1rem;
      padding: 25px;
      /* 移除阴影以避免与导航栏重叠 */
      position: relative;
      z-index: 61; /* 确保在所有元素之上，包括右侧边栏 */
    }

    /* 服务器状态卡片特殊样式 */
    .server-status-card {
      padding: 20px;
      /* 确保服务器状态卡片始终在最顶层，防止闪烁 */
      z-index: 9999 !important;
      /* 添加will-change属性优化渲染性能 */
      will-change: auto;
      /* 强制硬件加速 */
      transform: translate3d(0, 0, 0);
      /* 确保在页面加载时立即应用样式 */
      position: relative !important;
      /* 防止任何可能的闪烁 */
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      /* 创建新的层叠上下文 */
      isolation: isolate;
      /* 确保不透明度始终为1 */
      opacity: 1;
      /* 防止被其他元素遮挡 */
      pointer-events: auto;
    }

    .server-metrics {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .metric-row {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 20px;
    }

    .circular-progress {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .progress-ring {
      transform: rotate(-90deg);
    }

    .progress-ring-background {
      fill: none;
      stroke: #e5e7eb;
      stroke-width: 5;
    }

    .progress-ring-fill {
      fill: none;
      stroke: #3b82f6;
      stroke-width: 5;
      stroke-linecap: round;
      stroke-dasharray: 251.33; /* 2 * π * 40 */
      stroke-dashoffset: 251.33;
      transition: stroke-dashoffset 0.5s ease, stroke 0.3s ease;
    }

    .progress-text {
      position: absolute;
      text-align: center;
      font-size: 12px;
      font-weight: 600;
    }

    .progress-value {
      display: block;
      font-size: 14px;
      color: #1f2937;
      margin-bottom: 2px;
    }

    .progress-label {
      display: block;
      font-size: 10px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .bottom-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      gap: 20px;
    }

    .load-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .load-label {
      color: #6b7280;
      font-weight: 500;
    }

    .load-value {
      color: #1f2937;
      font-weight: 600;
      background: rgba(59, 130, 246, 0.1);
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 13px;
    }

    .system-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    .system-label {
      color: #6b7280;
      font-weight: 500;
    }

    .system-value {
      color: #1f2937;
      font-weight: 600;
    }

    /* 颜色状态 */
    .progress-ring-fill.warning {
      stroke: #f59e0b;
    }

    .progress-ring-fill.danger {
      stroke: #ef4444;
    }

    .stats-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .stat-item:last-child {
      border-bottom: none;
    }

    .stat-label {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
      color: #000;
    }

    /* 平板端布局 - 大厂风格 */
    @media (max-width: 1400px) and (min-width: 769px) {
      .main-container {
        grid-template-columns: 280px 1fr;
        gap: 25px;
        max-width: 1200px;
      }

      .sidebar-right {
        display: none;
      }

      .sidebar-left {
        position: sticky;
        top: 140px;
        height: fit-content;
      }

      .post-list {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }
    }

    /* 移动端布局 - 大厂风格 */
    @media (max-width: 768px) {
      body {
        font-size: 14px;
      }

      /* 移动端导航栏不需要特殊样式，使用默认响应式设计 */

      .nav-card:hover {
        background: rgba(255, 255, 255, 0.95);
        transform: translateY(-2px);
        border-color: rgba(0, 0, 0, 0.12);
      }

      .main-container {
        grid-template-columns: 1fr;
        padding: 110px 15px 40px;
        gap: 0;
      }

      /* 移动端侧边栏重新设计 */
      .sidebar-left {
        order: 1;
        margin-bottom: 25px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .sidebar-right {
        order: 3;
        margin-top: 25px;
        gap: 15px;
        display: flex;
        flex-direction: column;
      }

      .post-list {
        order: 2;
        grid-template-columns: 1fr;
        gap: 16px;
      }

      /* 移动端用户菜单优化 */
      .user-menu {
        min-width: 110px;
        right: -5px;
        font-size: 0.75rem;
      }
      
      .user-menu-item {
        padding: 6px 10px;
        font-size: 0.75rem;
        white-space: nowrap;
        line-height: 1.1;
      }

      /* 移动端卡片优化 */
      .profile-card, .stats-card, .category-card, .notice-card {
        padding: 20px;
        border-radius: 16px;
        backdrop-filter: blur(20px) saturate(150%);
        -webkit-backdrop-filter: blur(20px) saturate(150%);
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.7);
      }

      .profile-avatar {
        width: 80px;
        height: 80px;
      }

      .profile-nickname {
        font-size: 18px;
        margin: 12px 0 8px;
      }

      .social-links {
        gap: 12px;
        margin-top: 16px;
      }

      .social-link {
        width: 40px;
        height: 40px;
        border-radius: 12px;
      }

      /* 文章卡片移动端优化 */
      .post-item {
        border-radius: 16px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(20px) saturate(150%);
        -webkit-backdrop-filter: blur(20px) saturate(150%);
        border: 1px solid rgba(255, 255, 255, 0.7);
      }

      .post-cover {
        height: 200px;
      }

      .post-content {
        padding: 16px;
      }

      .post-title {
        font-size: 16px;
        line-height: 1.4;
        margin-bottom: 8px;
      }

      .post-excerpt {
        font-size: 13px;
        line-height: 1.5;
        margin-bottom: 12px;
      }

      .post-meta {
        font-size: 12px;
        gap: 8px;
      }

      .post-category, .post-tag {
        padding: 4px 8px;
        font-size: 11px;
        border-radius: 8px;
      }

      /* 服务器状态卡片移动端优化 */
      .server-metrics .metric-row {
        gap: 15px;
      }

      .circular-progress svg {
        width: 80px;
        height: 80px;
      }

      .circular-progress .progress-ring-background,
      .circular-progress .progress-ring-fill {
        stroke-width: 4;
      }

      .progress-value {
        font-size: 12px;
      }

      .progress-label {
        font-size: 9px;
      }

      .bottom-info {
        flex-direction: column;
        gap: 8px;
        align-items: stretch;
      }

      .load-item, .system-item {
        justify-content: center;
        font-size: 13px;
      }

      /* 分类和标签移动端优化 */
      .category-list, .tag-list {
        gap: 8px;
      }

      .category-item, .tag-item {
        padding: 8px 12px;
        font-size: 13px;
        border-radius: 12px;
      }

      .category-count {
        width: 20px;
        height: 20px;
        font-size: 11px;
      }

      /* 统计列表移动端优化 */
      .stats-list {
        gap: 12px;
      }

      .stat-item {
        padding: 12px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
      }

      .stat-item:last-child {
        border-bottom: none;
      }

      .stat-label {
        font-size: 13px;
      }

      .stat-value {
        font-size: 16px;
        font-weight: 700;
      }

      /* 页脚移动端优化 */
      .footer {
        padding: 30px 15px;
        font-size: 13px;
      }

      .footer-content p {
        margin: 8px 0;
      }
    }

    /* 超小屏幕优化 */
    @media (max-width: 480px) {
      /* 导航栏保持居中，不覆盖位置 */

      .main-container {
        padding: 105px 12px 30px;
      }

      .profile-card, .stats-card, .category-card, .notice-card {
        padding: 16px;
        border-radius: 14px;
      }

      .post-item {
        border-radius: 14px;
      }

      .post-content {
        padding: 14px;
      }

      /* 服务器状态卡片移动端完美优化 */
      .server-status-card {
        padding: 18px 15px;
      }
      
      .server-metrics {
        width: 100%;
      }
      
      .server-metrics .metric-row {
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
        align-items: center;
        gap: 0;
        padding: 15px 0;
        width: 100%;
      }
      
      /* 圆形进度条完美居中，左右对称 */
      .circular-progress {
        position: relative;
        width: 90px;
        height: 90px;
        padding: 0;
        margin: 0;
        overflow: visible !important;
        flex-shrink: 0;
      }
      
      .circular-progress svg {
        width: 90px !important;
        height: 90px !important;
        display: block;
      }
      
      .circular-progress svg circle {
        cx: 45;
        cy: 45;
        r: 36 !important;
      }
      
      .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        width: 100%;
        pointer-events: none;
      }
      
      .progress-value {
        font-size: 1rem;
        font-weight: 700;
        line-height: 1.2;
      }
      
      .progress-label {
        font-size: 0.75rem;
        margin-top: 2px;
        opacity: 0.8;
      }

      .bottom-info {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-top: 15px;
        padding: 0 15px;
      }
      
      .load-item,
      .system-item {
        flex: 1;
        text-align: center;
        font-size: 0.85rem;
      }
      
      .load-label,
      .system-label {
        display: inline;
        margin-right: 4px;
      }
      
      .load-value,
      .system-value {
        display: inline;
        font-weight: 600;
      }
    }
    
    /* 移除所有按钮和可点击元素的焦点轮廓 */
    button, a, input, select, textarea, [role="button"], [tabindex], .nav-card, .user-menu-item, .post-item, .hamburger-menu {
      outline: none !important;
      -webkit-tap-highlight-color: transparent !important;
    }
    
    button:focus, a:focus, input:focus, select:focus, textarea:focus, [role="button"]:focus, [tabindex]:focus, .nav-card:focus, .user-menu-item:focus, .post-item:focus, .hamburger-menu:focus {
      outline: none !important;
      box-shadow: none !important;
    }
  </style>
</head>
<body>
  <!-- 背景 -->
  <img class="bg-image" id="bgImage" src="/BG/BG.png" alt="背景">
  <div class="bg-overlay"></div>

  <!-- 导航栏 -->
  <div class="card-nav-container">
    <nav class="card-nav" id="cardNav">
      <div class="card-nav-top">
        <div class="hamburger-menu" id="hamburger">
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
        </div>
        <div class="logo-container">
          <span id="siteName">GL-Blog</span>
        </div>
        <div class="card-nav-cta-button" id="userButton">
          <span id="userButtonText">登录</span>
          <div class="user-menu" id="userMenu">
            <a href="/profile" class="user-menu-item" id="profileMenuItem">个人中心</a>
            <a href="/admin/posts" class="user-menu-item" id="adminMenuItem" style="display: none;">控制台</a>
            <div class="user-menu-divider"></div>
            <button class="user-menu-item" id="logoutButton">退出登录</button>
          </div>
        </div>
      </div>
       <div class="card-nav-content" id="mainNavContent">
         <a href="/" class="nav-card" style="background-color: #000000; color: #fff; text-decoration: none; cursor: pointer;">
           <div class="nav-card-label">首页</div>
         </a>
         <a href="/archive" class="nav-card" style="background-color: #333333; color: #fff; text-decoration: none; cursor: pointer;">
           <div class="nav-card-label">归档</div>
         </a>
         <a href="/about" class="nav-card" style="background-color: #666666; color: #fff; text-decoration: none; cursor: pointer;">
           <div class="nav-card-label">关于</div>
         </a>
       </div>
       <div class="card-nav-content" id="userNavContent" style="display: none;">
         <a href="/profile" class="nav-card" style="background-color: #000000; color: #fff; text-decoration: none; cursor: pointer;">
           <div class="nav-card-label" id="profileNavLabel">个人中心</div>
         </a>
         <a href="/admin/posts" class="nav-card" id="consoleNavCard" style="background-color: #333333; color: #fff; text-decoration: none; cursor: pointer; display: none;">
           <div class="nav-card-label" id="consoleNavLabel">控制台</div>
         </a>
         <button class="nav-card" id="logoutNavCard" style="background-color: #666666; color: #fff; border: none; cursor: pointer; font-family: inherit; font-size: inherit;">
           <div class="nav-card-label" id="logoutNavLabel">退出登录</div>
         </button>
       </div>
    </nav>
  </div>

  <!-- 主内容 -->
  <div class="main-container" id="mainContainer">
    <!-- 左侧个人信息 -->
    <aside class="sidebar-left">
      <div class="profile-card">
        <div class="profile-avatar" id="profileAvatar"></div>
        <div class="profile-nickname" id="profileNickname">博主昵称</div>
        <div class="profile-bio" id="profileBio"></div>
        <div class="social-links" id="socialLinks">
          <!-- 动态生成 -->
        </div>
      </div>

      <div class="notice-card">
        <div class="card-title">公告</div>
        <div class="notice-content" id="noticeContent">欢迎来到我的博客！</div>
      </div>

      <div class="category-card">
        <div class="card-title">分类</div>
        <div class="category-list" id="categoryList">
          <!-- 动态生成 -->
        </div>
      </div>

      <div class="category-card">
        <div class="card-title">标签</div>
        <div class="tag-list" id="tagList">
          <!-- 动态生成 -->
        </div>
      </div>
    </aside>

    <!-- 中间文章列表 -->
    <main class="post-list" id="postList">
      <!-- 动态生成 -->
    </main>

    <!-- 右侧统计 -->
    <aside class="sidebar-right">
      <div class="stats-card">
        <div class="card-title">站点统计</div>
        <div class="stats-list">
          <div class="stat-item">
            <div class="stat-label">
              <span>文章</span>
            </div>
            <div class="stat-value" id="statPosts">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">
              <span>分类</span>
            </div>
            <div class="stat-value" id="statCategories">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">
              <span>标签</span>
            </div>
            <div class="stat-value" id="statTags">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">
              <span>总字数</span>
            </div>
            <div class="stat-value" id="statWords">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">
              <span>访客数</span>
            </div>
            <div class="stat-value" id="statVisitors">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">
              <span>运行时长</span>
            </div>
            <div class="stat-value" id="statRuntime">0 天</div>
          </div>
        </div>
      </div>
      
      <!-- 服务器状态 -->
      <div class="stats-card server-status-card">
        <div class="card-title">服务器状态</div>
        <div class="server-metrics">
          <div class="metric-row">
            <div class="circular-progress" id="cpuProgress">
              <svg class="progress-ring" width="100" height="100">
                <circle class="progress-ring-background" cx="50" cy="50" r="40" />
                <circle class="progress-ring-fill" cx="50" cy="50" r="40" id="cpuCircle" />
              </svg>
              <div class="progress-text">
                <span class="progress-value" id="serverCPU">0%</span>
                <span class="progress-label">CPU</span>
              </div>
            </div>
            <div class="circular-progress" id="memoryProgress">
              <svg class="progress-ring" width="100" height="100">
                <circle class="progress-ring-background" cx="50" cy="50" r="40" />
                <circle class="progress-ring-fill" cx="50" cy="50" r="40" id="memoryCircle" />
              </svg>
              <div class="progress-text">
                <span class="progress-value" id="serverMemory">0%</span>
                <span class="progress-label">内存</span>
              </div>
            </div>
          </div>
          <div class="bottom-info">
            <div class="load-item">
              <span class="load-label">负载:</span>
              <span class="load-value" id="serverLoad">0%</span>
            </div>
            <div class="system-item">
              <span class="system-label">系统:</span>
              <span class="system-value" id="serverOS">-</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- 页面底部版权信息 -->
  <footer class="footer">
    <div class="footer-content">
      <p>© 2025 <a href="https://github.com/Lihu-PR" target="_blank" rel="noopener noreferrer">Lihu-PR</a>. All Rights Reserved.</p>
      <p>Powered by <strong>GL-Blog</strong> | Be water my friend</p>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script>
    // 导航栏交互
    const hamburger = document.getElementById('hamburger');
    const cardNav = document.getElementById('cardNav');
    const mainContainer = document.getElementById('mainContainer');
    const mainNavContent = document.getElementById('mainNavContent');
    const userNavContent = document.getElementById('userNavContent');
    let isOpen = false;
    let currentNav = 'main'; // 'main' or 'user'

    function getResponsivePadding() {
      const width = window.innerWidth;
      if (width <= 480) {
        return { closed: '105px', open: '165px' };
      } else if (width <= 768) {
        return { closed: '110px', open: '170px' };
      } else {
        return { closed: '140px', open: '200px' };
      }
    }

    function updateMenuText() {
      const width = window.innerWidth;
      const profileMenuItem = document.getElementById('profileMenuItem');
      const logoutButton = document.getElementById('logoutButton');
      const profileNavLabel = document.getElementById('profileNavLabel');
      const logoutNavLabel = document.getElementById('logoutNavLabel');
      
      if (width <= 768) {
        // 移动端使用短文字
        profileMenuItem.textContent = '个人';
        logoutButton.textContent = '退出';
        profileNavLabel.textContent = '个人';
        logoutNavLabel.textContent = '退出';
      } else {
        // 桌面端使用完整文字
        profileMenuItem.textContent = '个人中心';
        logoutButton.textContent = '退出登录';
        profileNavLabel.textContent = '个人中心';
        logoutNavLabel.textContent = '退出登录';
      }
    }

    function closeNav() {
      isOpen = false;
      hamburger.classList.remove('open');
      cardNav.classList.remove('open');
      const padding = getResponsivePadding();
      gsap.to(mainContainer, {
        paddingTop: padding.closed,
        duration: 0.4,
        ease: 'power3.out'
      });
    }

    function openNav(navType) {
      isOpen = true;
      currentNav = navType;
      hamburger.classList.add('open');
      cardNav.classList.add('open');
      
      // 切换导航内容
      if (navType === 'main') {
        mainNavContent.style.display = 'flex';
        userNavContent.style.display = 'none';
      } else {
        mainNavContent.style.display = 'none';
        userNavContent.style.display = 'flex';
      }
      
      const padding = getResponsivePadding();
      gsap.to(mainContainer, {
        paddingTop: padding.open,
        duration: 0.4,
        ease: 'power3.out'
      });
    }

    hamburger.addEventListener('click', () => {
      if (isOpen && currentNav === 'main') {
        closeNav();
      } else {
        openNav('main');
      }
    });

    // 用户菜单交互
    const userButton = document.getElementById('userButton');
    const userMenu = document.getElementById('userMenu');
    const userButtonText = document.getElementById('userButtonText');
    const adminMenuItem = document.getElementById('adminMenuItem');
    const logoutButton = document.getElementById('logoutButton');

    // 检查用户登录状态
    async function checkUserStatus() {
      try {
        const response = await fetch('/api/user-info');
        if (response.ok) {
          const user = await response.json();
          // 优先显示昵称，其次用户名
          userButtonText.textContent = user.nickname || user.username || '用户';
          
          // 显示或隐藏管理员选项
          if (user.isAdmin) {
            adminMenuItem.style.display = 'block';
            document.getElementById('consoleNavCard').style.display = 'flex';
          }
          return true;
        } else {
          userButtonText.textContent = '登录';
          return false;
        }
      } catch (error) {
        userButtonText.textContent = '登录';
        return false;
      }
    }

    // 用户按钮点击事件 - 展开导航栏并显示用户导航
    userButton.addEventListener('click', (e) => {
      e.stopPropagation();
      
      // 如果未登录，跳转到登录页
      if (userButtonText.textContent === '登录') {
        window.location.href = '/login';
        return;
      }
      
      // 切换用户导航
      if (isOpen && currentNav === 'user') {
        closeNav();
      } else {
        openNav('user');
      }
    });

    // 点击其他地方关闭导航栏
    document.addEventListener('click', (e) => {
      const isClickInsideNav = cardNav.contains(e.target);
      if (!isClickInsideNav && isOpen) {
        closeNav();
      }
    });

    // 防止点击导航内容时关闭
    cardNav.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    // 退出登录（原有的按钮）
    logoutButton.addEventListener('click', async () => {
      try {
        await fetch('/api/logout', { method: 'POST' });
        window.location.reload();
      } catch (error) {
        console.error('退出登录失败:', error);
      }
    });

    // 导航栏中的退出登录按钮
    const logoutNavCard = document.getElementById('logoutNavCard');
    logoutNavCard.addEventListener('click', async () => {
      try {
        await fetch('/api/logout', { method: 'POST' });
        window.location.reload();
      } catch (error) {
        console.error('退出登录失败:', error);
      }
    });

    // 社交图标映射 - 使用官方极简SVG图标
    const socialIcons = {
      github: '<svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg>',
      bilibili: '<svg viewBox="0 0 24 24"><path d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .355-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.786 1.894v7.52c.017.764.28 1.395.786 1.893.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.786-1.893v-7.52c-.017-.765-.28-1.396-.786-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c0-.373.129-.689.386-.947.258-.257.574-.386.947-.386zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373Z"/></svg>',
      email: '<svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>',
      douyin: '<svg viewBox="0 0 24 24"><path d="M12.53.02C13.84 0 15.14.01 16.44 0c.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
      weibo: '<svg viewBox="0 0 24 24"><path d="M10.098 20.323c-3.977.391-7.414-1.406-7.672-4.02-.259-2.609 2.759-5.047 6.74-5.441 3.979-.394 7.413 1.404 7.671 4.018.259 2.6-2.759 5.049-6.737 5.443h-.002zm8.751-11.949c-.339-.127-.565-.221-.39-.804.381-1.26.42-2.347.002-3.125-.785-1.46-2.939-1.384-5.416-.13 0 0-.778.396-.579-.322.382-1.422.323-2.61-.292-3.293-1.388-1.54-5.078.061-8.248 3.577-2.37 2.627-3.75 5.418-3.75 7.989 0 4.711 6.042 7.578 11.954 7.578 7.751 0 12.911-4.503 12.911-8.078 0-2.163-1.821-3.386-3.192-3.392zm1.988-7.374c-1.655-1.839-4.108-2.533-6.318-2.106-.518.099-.836.638-.713 1.179.123.54.66.885 1.177.784 1.536-.297 3.239.185 4.388 1.461 1.15 1.273 1.515 2.951 1.116 4.441-.144.535.195 1.092.757 1.24.561.149 1.145-.166 1.288-.702.574-2.149.072-4.51-1.695-6.297z"/></svg>',
      douban: '<svg viewBox="0 0 24 24"><path d="M4.5 3h15v2.5h-15V3zm.5 4h14v1H5V7zm8.5 4.5l2.5 7h2l-2.5-7h-2zm-7 0l-2.5 7h2l2.5-7h-2zM3 19.5h18v1.5H3v-1.5z"/></svg>',
      zhihu: '<svg viewBox="0 0 24 24"><path d="M5.721 0C4.12 0 2.82 1.3 2.82 2.9v10.2h2.4V2.9h.5c0-.6.5-1 1-1h5.1v11.2h-3l-1.5 3.5-2.4-3.5H2.32c-.5 0-1-.5-1-1V2.9C1.32.9 2.92-.1 4.82 0h.9v.1zm8.279 0v19.3h2.7V19c.8.7 1.9 1.1 3.1 1.1 2.5 0 4.5-2.1 4.5-4.7 0-2.5-2-4.6-4.5-4.6-1.2 0-2.3.4-3.1 1.1V0h-2.7zm2.7 13.2v3.4c.6.7 1.5 1.2 2.4 1.2 1.5 0 2.7-1.3 2.7-2.9 0-1.6-1.2-2.9-2.7-2.9-.9 0-1.8.5-2.4 1.2z"/></svg>',
      tiktok: '<svg viewBox="0 0 24 24"><path d="M12.53.02C13.84 0 15.14.01 16.44 0c.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
      telegram: '<svg viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>',
      facebook: '<svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
      youtube: '<svg viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
      discord: '<svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>',
      twitter: '<svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
      steam: '<svg viewBox="0 0 24 24"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"/></svg>'
    };

     // 打字机循环效果（打字→删除→打字...）
     function typeWriter(element, text, typeSpeed = 150, deleteSpeed = 100, pauseTime = 2000) {
       let i = 0;
       let isDeleting = false;
       
       // 初始化：添加文本容器和光标
       element.innerHTML = '<span class="typing-text"></span><span class="typing-cursor"></span>';
       const textSpan = element.querySelector('.typing-text');
       
       function type() {
         const currentText = isDeleting 
           ? text.substring(0, i - 1)
           : text.substring(0, i + 1);
         
         textSpan.textContent = currentText;
         
         if (!isDeleting && i === text.length) {
           // 打完了，暂停后开始删除
           isDeleting = true;
           setTimeout(type, pauseTime);
           return;
         }
         
         if (isDeleting && i === 0) {
           // 删完了，开始重新打字
           isDeleting = false;
           setTimeout(type, 500);
           return;
         }
         
         if (isDeleting) {
           i--;
           setTimeout(type, deleteSpeed);
         } else {
           i++;
           setTimeout(type, typeSpeed);
         }
       }
       
       type();
     }

    // 计算运行时长
    function calculateRuntime(startDate) {
      if (!startDate) return '0 天';
      const start = new Date(startDate);
      const now = new Date();
      const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24));
      return `${diff} 天`;
    }

    // 更新圆形进度条
    function updateCircularProgress(circleId, percentage) {
      const circle = document.getElementById(circleId);
      const circumference = 2 * Math.PI * 40; // r = 40 (更大的圆)
      const offset = circumference - (percentage / 100) * circumference;
      
      circle.style.strokeDashoffset = offset;
      
      // 根据百分比设置颜色
      circle.classList.remove('warning', 'danger');
      if (percentage >= 90) {
        circle.classList.add('danger');
      } else if (percentage >= 60) {
        circle.classList.add('warning');
      }
    }

    // 加载服务器状态
    async function loadServerStatus() {
      try {
        const response = await fetch('/api/server-status');
        if (response.ok) {
          const status = await response.json();
          
          // 解析百分比数值
          const cpuPercent = parseFloat(status.cpu.usage);
          const memoryPercent = parseFloat(status.memory.usage);
          const loadPercent = parseFloat(status.load.average);
          
          // 更新文本显示
          document.getElementById('serverCPU').textContent = status.cpu.usage + '%';
          document.getElementById('serverMemory').textContent = status.memory.usage + '%';
          document.getElementById('serverLoad').textContent = status.load.average + '%';
          document.getElementById('serverOS').textContent = status.system.os + '/' + status.system.arch;
          
          // 更新圆形进度条
          updateCircularProgress('cpuCircle', cpuPercent);
          updateCircularProgress('memoryCircle', memoryPercent);
        } else {
          // 如果获取失败，显示默认值
          document.getElementById('serverCPU').textContent = '-';
          document.getElementById('serverMemory').textContent = '-';
          document.getElementById('serverLoad').textContent = '-';
          document.getElementById('serverOS').textContent = '-';
          
          // 重置进度条
          updateCircularProgress('cpuCircle', 0);
          updateCircularProgress('memoryCircle', 0);
        }
      } catch (error) {
        console.error('获取服务器状态失败:', error);
        // 显示错误状态
        document.getElementById('serverCPU').textContent = '-';
        document.getElementById('serverMemory').textContent = '-';
        document.getElementById('serverLoad').textContent = '-';
        document.getElementById('serverOS').textContent = '-';
        
        // 重置进度条
        updateCircularProgress('cpuCircle', 0);
        updateCircularProgress('memoryCircle', 0);
      }
    }

    // 加载设置和文章
    async function loadData() {
      try {
        // 检查用户登录状态
        await checkUserStatus();

        // 加载设置
        const settingsRes = await fetch('/api/settings');
        const settings = await settingsRes.json();

        // 更新站点名称
        document.getElementById('siteName').textContent = settings.siteName || 'GL-Blog';
        document.title = settings.siteName || 'GL-Blog';

        // 更新背景
        if (settings.customBackground) {
          document.getElementById('bgImage').src = settings.customBackground;
        }

         // 更新个人信息（使用 img 标签以获得更好的裁剪效果）
         const avatar = document.getElementById('profileAvatar');
         const avatarUrl = settings.avatar || '/BG/icon.jpg';
         const avatarImg = document.createElement('img');
         avatarImg.src = avatarUrl;
         avatarImg.alt = '头像';
         
         // 如果默认头像加载失败，使用SVG备用头像
         avatarImg.onerror = function() {
           this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iMzciIHI9IjE4IiBmaWxsPSIjOWNhM2FmIi8+CjxwYXRoIGQ9Ik0yMCA4MEM0MCA2NSA2MCA2NSA4MCA4MFY5MEgyMFY4MFoiIGZpbGw9IiM5Y2EzYWYiLz4KPC9zdmc+';
           this.onerror = null; // 防止无限循环
         };
         
         avatar.innerHTML = '';
         avatar.appendChild(avatarImg);
         console.log('头像URL:', avatarUrl);
         
         document.getElementById('profileNickname').textContent = settings.nickname || 'Lihu-PR';
         
         const bioElement = document.getElementById('profileBio');
         const bio = settings.bio || 'Be water my friend';
         typeWriter(bioElement, bio, 150, 100, 2000);

        // 更新社交链接
        const socialLinksContainer = document.getElementById('socialLinks');
        socialLinksContainer.innerHTML = '';
        
        // 默认社交链接
        const defaultSocialLinks = [
          { platform: 'github', url: 'https://github.com/Lihu-PR' },
          { platform: 'bilibili', url: 'https://space.bilibili.com/305674742?spm_id_from=333.1007.0.0' },
          { platform: 'email', url: 'mailto:17192413622@163.com' },
          { platform: 'douyin', url: 'https://www.douyin.com/user/MS4wLjABAAAAEpo7zO7BLFarRWgMsew-oyw2WeDmgaNL-bjeVFEusNU?from_tab_name=main' }
        ];
        
        const linksToShow = (settings.socialLinks && settings.socialLinks.length > 0) 
          ? settings.socialLinks.slice(0, 4) 
          : defaultSocialLinks;
        
        linksToShow.forEach(link => {
          const a = document.createElement('a');
          // 处理邮箱链接
          a.href = link.platform.toLowerCase() === 'email' && !link.url.startsWith('mailto:') 
            ? `mailto:${link.url}` 
            : link.url;
          a.className = 'social-link';
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.innerHTML = socialIcons[link.platform.toLowerCase()] || socialIcons.github;
          a.title = link.platform;
          socialLinksContainer.appendChild(a);
        });

        // 更新公告
        document.getElementById('noticeContent').textContent = settings.notice || '欢迎来到我的博客！';

        // 更新分类
        const categoryList = document.getElementById('categoryList');
        categoryList.innerHTML = '';
        if (settings.categories && settings.categories.length > 0) {
          settings.categories.forEach(category => {
            const div = document.createElement('a');
            div.className = 'category-item';
            div.href = '#';
            div.innerHTML = `
              <span>${category}</span>
              <span class="category-count" data-category="${category}">0</span>
            `;
            categoryList.appendChild(div);
          });
        }

        // 更新标签
        const tagList = document.getElementById('tagList');
        tagList.innerHTML = '';
        if (settings.tags && settings.tags.length > 0) {
          settings.tags.forEach(tag => {
            const a = document.createElement('a');
            a.className = 'tag-item';
            a.href = '#';
            a.textContent = tag;
            tagList.appendChild(a);
          });
        }

        // 加载文章
        const postsRes = await fetch('/api/posts');
        let allPosts = await postsRes.json();
        let currentFilter = { type: null, value: null };

        // 渲染文章列表
        function renderPosts(posts) {
          const postList = document.getElementById('postList');
          postList.innerHTML = '';
          
          if (posts.length === 0) {
            postList.innerHTML = '<div style="text-align: center; padding: 60px 20px; color: #999; font-size: 1.1rem;">暂无文章</div>';
            return;
          }

          posts.forEach(post => {
            const article = document.createElement('a');
            article.className = 'post-item';
            article.href = `/post/${post.slug}`;
            article.dataset.category = post.category || '';
            article.dataset.tags = post.tags ? post.tags.join(',') : '';
            
            // 封面图（如果没有封面，使用默认渐变背景）
            const coverHTML = post.cover ? 
              `<img class="post-cover" src="${post.cover}" alt="${post.title}">` : 
              `<div class="post-cover"></div>`;

            // 分类标签
            const categoryHTML = post.category ? 
              `<span class="post-category">${post.category}</span>` : '';

            // 标签列表
            const tagsHTML = post.tags && post.tags.length > 0 ? 
              `<div class="post-tags">${post.tags.map(tag => `<span class="post-tag">#${tag}</span>`).join('')}</div>` : 
              '';

            // 组装卡片HTML
            article.innerHTML = `
              ${coverHTML}
              <div class="post-content">
                <h2 class="post-title">${post.title}</h2>
                <div class="post-meta">
                  ${categoryHTML}
                  ${tagsHTML}
                </div>
              </div>
            `;
            
            postList.appendChild(article);
          });
        }

        // 初始渲染所有文章
        renderPosts(allPosts);
        
        // 统计数据
        let totalWords = 0;
        const categoryCounts = {};

        allPosts.forEach(post => {
          if (post.category) {
            categoryCounts[post.category] = (categoryCounts[post.category] || 0) + 1;
          }
          totalWords += (post.excerpt || '').length;
        });

        // 更新分类计数
        Object.keys(categoryCounts).forEach(category => {
          const countEl = document.querySelector(`[data-category="${category}"]`);
          if (countEl) {
            countEl.textContent = categoryCounts[category];
          }
        });

        // 更新统计
        document.getElementById('statPosts').textContent = allPosts.length;
        document.getElementById('statCategories').textContent = settings.categories?.length || 0;
        document.getElementById('statTags').textContent = settings.tags?.length || 0;
        document.getElementById('statWords').textContent = totalWords.toLocaleString();
        document.getElementById('statVisitors').textContent = settings.visitorCount?.toLocaleString() || 0;
        document.getElementById('statRuntime').textContent = calculateRuntime(settings.siteStartDate);
        
        // 加载服务器状态
        loadServerStatus();

        // 添加分类筛选功能
        document.querySelectorAll('.category-item').forEach(item => {
          item.addEventListener('click', (e) => {
            e.preventDefault();
            const category = item.querySelector('span:first-child').textContent;
            
            // 切换激活状态
            if (item.classList.contains('active')) {
              item.classList.remove('active');
              currentFilter = { type: null, value: null };
              renderPosts(allPosts);
            } else {
              // 移除其他激活状态
              document.querySelectorAll('.category-item, .tag-item').forEach(el => el.classList.remove('active'));
              item.classList.add('active');
              currentFilter = { type: 'category', value: category };
              const filtered = allPosts.filter(post => post.category === category);
              renderPosts(filtered);
            }
          });
        });

        // 添加标签筛选功能
        document.querySelectorAll('.tag-item').forEach(item => {
          item.addEventListener('click', (e) => {
            e.preventDefault();
            const tag = item.textContent.trim();
            
            // 切换激活状态
            if (item.classList.contains('active')) {
              item.classList.remove('active');
              currentFilter = { type: null, value: null };
              renderPosts(allPosts);
            } else {
              // 移除其他激活状态
              document.querySelectorAll('.category-item, .tag-item').forEach(el => el.classList.remove('active'));
              item.classList.add('active');
              currentFilter = { type: 'tag', value: tag };
              const filtered = allPosts.filter(post => 
                post.tags && post.tags.includes(tag)
              );
              renderPosts(filtered);
            }
          });
        });

      } catch (error) {
        console.error('加载数据失败:', error);
      }
    }

    loadData();
    updateMenuText();
    
    // 每4秒刷新一次服务器状态
    setInterval(loadServerStatus, 4000);
    
    // 窗口大小改变时更新菜单文字
    window.addEventListener('resize', updateMenuText);
  </script>
</body>
</html>
